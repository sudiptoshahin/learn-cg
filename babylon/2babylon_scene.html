<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Babylon.js Sample Code</title>

    <!-- Babylon.js + loaders -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>

    <style>
      html,
      body {
        overflow: hidden;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #renderCanvas {
        width: 100%;
        height: 100%;
        touch-action: none;
      }
    </style>
  </head>
  <body>
    <canvas id="renderCanvas"></canvas>

    <script>
      // Grab canvas
      const canvas = document.getElementById("renderCanvas");

      // Create engine
      const engine = new BABYLON.Engine(canvas, true);

      // Create scene
      const createScene = () => {
        const scene = new BABYLON.Scene(engine);

        // Camera
        // const camera = new BABYLON.FreeCamera(
        //   "camera1",
        //   new BABYLON.Vector3(20, 3, -10),
        //   scene
        // );
        const camera = new BABYLON.ArcRotateCamera('arcCamera', -Math.PI/2, Math.PI/2.5, 15, new BABYLON.Vector3(0, 0, 0));
        camera.setTarget(BABYLON.Vector3.Zero());
        camera.attachControl(canvas, true);

        // Light
        const light = new BABYLON.HemisphericLight(
          "light1",
          new BABYLON.Vector3(0, 1, 0),
          scene
        );
        light.intensity = 0.7;

        // Ground
        BABYLON.MeshBuilder.CreateGround(
          "ground",
          { width: 10, height: 10 },
          scene
        );

        // Import GLB model from Files
        BABYLON.SceneLoader.ImportMeshAsync(
        null,
        "assets/",     // now relative to /public
        "Cubone.glb",
        scene
        ).then((result) => {
        const importedMesh = result.meshes[0];
        importedMesh.position.x = 3.5;
        importedMesh.position.y = 1;
        importedMesh.position.z = 0;
        importedMesh.scaling = new BABYLON.Vector3(2, 2, 2);

        // importedMesh.rotation.y = Math.PI;

        const myMesh1 = scene.getMeshByName("myMesh_1");
        if (myMesh1) {
            myMesh1.rotation.y = Math.PI / 2;
        }
        });

        BABYLON.ImportMeshAsync("https://assets.babylonjs.com/meshes/both_houses_scene.babylon").then((result) => {
          const house1 = scene.getMeshByName('detached_house');
          house1.position.y = 1;
          house1.position.x = 5;
          
          const house2 = result.meshes[2];
          house2.position.y = 1;
        });

        return scene;
      };

      const scene = createScene();

      // Render loop
      engine.runRenderLoop(() => {
        scene.render();
      });

      // Resize
      window.addEventListener("resize", () => {
        engine.resize();
      });
    </script>
  </body>
</html>
